{% extends 'base.html.twig' %}

{% block title %}Profile - {{ user.nickname }}{% endblock %}

{% block body %}
    <div class="max-w-4xl mx-auto py-8 px-4">
        <h1 class="text-3xl font-bold mb-8">Your Profile</h1>

        {% for message in app.flashes('success') %}
            <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
                {{ message }}
            </div>
        {% endfor %}

        {% for message in app.flashes('error') %}
            <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
                {{ message }}
            </div>
        {% endfor %}

        <div class="shadow rounded-lg p-6 mb-6">
            <div class="grid grid-cols-2 gap-4">
                <div class="font-semibold">Nickname:</div>
                <div>{{ user.nickname }}</div>

                <div class="font-semibold">Email:</div>
                <div>{{ user.email }}</div>

                <div class="font-semibold">Email verified:</div>
                <div>{{ user.isVerified ? 'Yes' : 'No' }}</div>
            </div>
        </div>

        <div class="flex gap-4">
            <a href="{{ path('app_profile_edit') }}" class="inline-block bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                Edit Profile
            </a>

            <form method="post" action="{{ path('app_profile_delete') }}" onsubmit="return confirm('Are you sure you want to delete your account? This action cannot be undone.');">
                <input type="hidden" name="_token" value="{{ csrf_token('delete-profile') }}">
                <button type="submit" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded">
                    Delete Account
                </button>
            </form>
        </div>
    </div>
{% endblock %}