{% extends 'base.html.twig' %}

{% block title %}Mon Profil{% endblock %}

{% block body %}
<div class="h-fit bg-neutral-900 text-gray-100 rounded-xl">
    <div class="container mx-auto p-6">
        {# En-tête profil #}
        <div class="mb-8 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="w-20 h-20 bg-[#5d35d8] rounded-full flex items-center justify-center">
                    <span class="text-2xl font-bold">{{ user.nickname|slice(0, 1)|upper }}</span>
                </div>
                <div>
                    <h1 class="text-2xl font-bold">{{ user.nickname }}</h1>
                    <p class="text-gray-400">Profil Utilisateur #{{ user.id }}</p>
                </div>
            </div>
            
            <button onclick="toggleEdit()" class="bg-[#5d35d8] hover:bg-[#4c2bb0] px-4 py-2 rounded-lg transition-colors">
                Modifier le profil
            </button>
        </div>

        {# Contenu du profil #}
        <div class="bg-neutral-800 rounded-xl p-6">
            {# Mode visualisation #}
            <div id="viewMode">
                <div class="grid gap-6">
                    <div class="bg-neutral-700 p-4 rounded-lg">
                        <p class="text-sm text-gray-400 mb-1">Email</p>
                        <p class="font-medium">{{ user.email }}</p>
                    </div>

                    <div class="bg-neutral-700 p-4 rounded-lg">
                        <p class="text-sm text-gray-400 mb-1">Pseudo</p>
                        <p class="font-medium">{{ user.nickname }}</p>
                    </div>

                    <div class="bg-neutral-700 p-4 rounded-lg">
                        <p class="text-sm text-gray-400 mb-1">Rôles</p>
                        <div class="flex gap-2">
                            {% for role in user.roles %}
                                <span class="bg-[#5d35d8]/20 text-white px-3 py-1 rounded-full text-sm">
                                    {{ role|replace({'ROLE_': ''}) }}
                                </span>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>

            {# Mode édition #}
            <div id="editMode" class="hidden">
                <form method="POST" action="{{ path('app_profile_show') }}" class="space-y-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm text-gray-400 mb-2">Email</label>
                            <input type="email" name="email" value="{{ user.email }}"
                                   class="w-full bg-neutral-700 border border-neutral-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-rose-500">
                        </div>

                        <div>
                            <label class="block text-sm text-gray-400 mb-2">Pseudo</label>
                            <input type="text" name="nickname" value="{{ user.nickname }}"
                                   class="w-full bg-neutral-700 border border-neutral-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-rose-500">
                        </div>

                        <div>
                            <label class="block text-sm text-gray-400 mb-2">Nouveau mot de passe</label>
                            <input type="password" name="password" 
                                   class="w-full bg-neutral-700 border border-neutral-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-rose-500">
                            <p class="text-sm text-gray-400 mt-1">Laissez vide pour conserver l'actuel</p>
                        </div>
                    </div>

                    <div class="flex gap-4 pt-4">
                        <button type="submit" 
                                class="bg-[#5d35d8] hover:bg-[#4c2bb0] px-6 py-2 rounded-lg transition-colors">
                            Enregistrer
                        </button>
                        <button type="button" onclick="toggleEdit()"
                                class="bg-neutral-700 hover:bg-neutral-600 px-6 py-2 rounded-lg transition-colors">
                            Annuler
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
function toggleEdit() {
    document.getElementById('viewMode').classList.toggle('hidden');
    document.getElementById('editMode').classList.toggle('hidden');
}
</script>
{% endblock %}